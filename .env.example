# .env.example - Template for required environment variables
# Copy this file to .env and fill in your values
# DO NOT commit .env to version control!

# Database Configuration
DB_HOST=localhost
DB_PORT=5432
DB_NAME=regulens
DB_USER=regulens
DB_PASSWORD=  # Generate with: openssl rand -base64 32

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=  # Generate with: openssl rand -base64 32

# JWT Secret (must be 32+ characters)
JWT_SECRET=  # Generate with: openssl rand -hex 32
JWT_SECRET_KEY=  # Generate with: openssl rand -hex 64 (for longer keys)

# Application Configuration
WEB_SERVER_HOST=0.0.0.0
WEB_SERVER_PORT=8080
WEB_UI_PORT=8081
WEB_UI_HOST=0.0.0.0
CORS_ALLOWED_ORIGIN=http://localhost:3000
NODE_ENV=development

# Session Configuration
JWT_EXPIRATION_HOURS=1600
SESSION_EXPIRY_HOURS=24

# OpenAI API Key (if using GPT-4)
OPENAI_API_KEY=

# Anthropic API Key (if using Claude)
ANTHROPIC_API_KEY=

# Security Settings
MAX_LOGIN_ATTEMPTS=5
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# Audit Settings
AUDIT_RETENTION_DAYS=365

# Dynamic Configuration Management
# The system supports runtime configuration updates via the web UI
# Configuration changes are persisted to the database with full audit trail
# CONFIG_UPDATE_USER_ID=admin  # Default user ID for configuration updates
# CONFIG_UPDATE_AUTO_BACKUP=true  # Automatically backup before major config changes

# Regulatory Monitor URL (for inter-service communication)
REGULATORY_MONITOR_URL=http://localhost:8081

# OpenAI API Configuration (for GPT-4 Chatbot)
OPENAI_API_KEY=  # Required: Get from https://platform.openai.com/api-keys
OPENAI_ORGANIZATION_ID=  # Optional: Your OpenAI organization ID
OPENAI_API_BASE_URL=https://api.openai.com/v1  # Optional: Custom API base URL

# Chatbot Configuration
CHATBOT_MODEL=gpt-4-turbo-preview  # Default model for chatbot
CHATBOT_MAX_TOKENS=1000  # Maximum tokens per response
CHATBOT_TEMPERATURE=0.7  # Response creativity (0.0-2.0)
CHATBOT_RATE_LIMIT_REQUESTS=100  # Max requests per hour per user
CHATBOT_RATE_LIMIT_TOKENS=10000  # Max tokens per hour per user
CHATBOT_RATE_LIMIT_COST=10.0  # Max cost per day per user in USD

# Semantic Search Configuration
SEMANTIC_SEARCH_EMBEDDING_DIMENSIONS=384  # Vector dimensions for embeddings
SEMANTIC_SEARCH_DEFAULT_SIMILARITY_THRESHOLD=0.7  # Minimum similarity score (0.0-1.0)
SEMANTIC_SEARCH_MAX_RESULTS=50  # Maximum results per search
SEMANTIC_SEARCH_CACHE_TTL_HOURS=24  # Cache TTL for search results

# LLM Text Analysis Configuration
TEXT_ANALYSIS_MODEL=gpt-4-turbo-preview  # Default model for text analysis
TEXT_ANALYSIS_CACHE_ENABLED=true  # Enable caching for performance
TEXT_ANALYSIS_CACHE_TTL_HOURS=24  # Cache TTL for analysis results
TEXT_ANALYSIS_BATCH_SIZE=5  # Maximum concurrent batch processing
TEXT_ANALYSIS_CONFIDENCE_THRESHOLD=0.5  # Minimum confidence for results
TEXT_ANALYSIS_MAX_TEXT_LENGTH=10000  # Maximum text length for analysis

# Natural Language Policy Generation Configuration
POLICY_GENERATION_MODEL=gpt-4-turbo-preview  # Default model for policy generation
POLICY_GENERATION_VALIDATION_ENABLED=true  # Enable rule validation
POLICY_GENERATION_MAX_COMPLEXITY=3  # Maximum rule complexity level (1-5)
POLICY_GENERATION_REQUIRE_APPROVAL=true  # Require approval for deployment
POLICY_GENERATION_MAX_DESCRIPTION_LENGTH=2000  # Maximum policy description length

# Dynamic Configuration Management
CONFIG_CACHE_SIZE=1000  # Maximum cached configuration entries
CONFIG_ENCRYPTION_KEY=your-encryption-key-here  # Key for encrypting sensitive config values
CONFIG_VALIDATION_ENABLED=true  # Enable configuration validation
CONFIG_CHANGE_LOGGING=true  # Enable audit logging for config changes
CONFIG_BACKUP_ENABLED=true  # Enable configuration backups

# Advanced Rule Engine Configuration
RULE_ENGINE_EXECUTION_TIMEOUT_MS=5000  # Maximum rule execution time in milliseconds
RULE_ENGINE_MAX_PARALLEL_EXECUTIONS=10  # Maximum parallel rule executions
RULE_ENGINE_ENABLE_PERFORMANCE_MONITORING=true  # Enable rule performance tracking
RULE_ENGINE_CACHE_SIZE=1000  # Maximum cached rules
RULE_ENGINE_DEFAULT_RISK_THRESHOLD=0.7  # Default fraud risk threshold
RULE_ENGINE_BATCH_SIZE_LIMIT=1000  # Maximum transactions per batch

# Tool Categories Configuration
TOOL_CATEGORIES_ENABLED=true  # Enable tool categories
TOOL_CATEGORIES_CACHE_SIZE=500  # Maximum cached tool results
TOOL_CATEGORIES_EXECUTION_TIMEOUT_MS=30000  # Tool execution timeout
TOOL_CATEGORIES_MAX_CONCURRENT_EXECUTIONS=5  # Maximum concurrent tool executions
TOOL_CATEGORIES_ENABLE_USAGE_TRACKING=true  # Track tool usage analytics

# Consensus Engine Configuration
CONSENSUS_ENGINE_ENABLED=true  # Enable consensus engine
CONSENSUS_ENGINE_DEFAULT_ALGORITHM=MAJORITY  # Default voting algorithm (UNANIMOUS, MAJORITY, WEIGHTED_MAJORITY, RANKED_CHOICE, QUORUM)
CONSENSUS_ENGINE_MAX_ROUNDS=3  # Maximum voting rounds per consensus
CONSENSUS_ENGINE_TIMEOUT_PER_ROUND_MINUTES=10  # Timeout per round in minutes
CONSENSUS_ENGINE_DEFAULT_THRESHOLD=0.7  # Default consensus threshold
CONSENSUS_ENGINE_MIN_PARTICIPANTS=3  # Minimum participants required
CONSENSUS_ENGINE_CACHE_SIZE=100  # Maximum cached consensus processes

# Message Translator Configuration
MESSAGE_TRANSLATOR_ENABLED=true  # Enable message translator
MESSAGE_TRANSLATOR_DEFAULT_PROTOCOL=JSON_RPC  # Default protocol (JSON_RPC, REST_HTTP, GRPC, SOAP)
MESSAGE_TRANSLATOR_MAX_BATCH_SIZE=50  # Maximum batch translation size
MESSAGE_TRANSLATOR_TIMEOUT_MS=30000  # Translation timeout in milliseconds
MESSAGE_TRANSLATOR_PROTOCOL_VALIDATION=true  # Enable protocol validation
MESSAGE_TRANSLATOR_CACHE_ENABLED=true  # Enable translation caching
MESSAGE_TRANSLATOR_CACHE_SIZE=1000  # Maximum cached translations

# Communication Mediator Configuration
COMMUNICATION_MEDIATOR_ENABLED=true  # Enable communication mediator
COMMUNICATION_MEDIATOR_DEFAULT_TIMEOUT_MINUTES=30  # Default conversation timeout
COMMUNICATION_MEDIATOR_MAX_PARTICIPANTS=10  # Maximum participants per conversation
COMMUNICATION_MEDIATOR_CONFLICT_DETECTION_ENABLED=true  # Enable automatic conflict detection
COMMUNICATION_MEDIATOR_AUTOMATIC_MEDIATION_ENABLED=true  # Enable automatic mediation

# Consensus Engine Configuration
CONSENSUS_ENGINE_ENABLED=true  # Enable consensus engine for collaborative decision-making
CONSENSUS_ENGINE_DEFAULT_TIMEOUT_MINUTES=60  # Default consensus session timeout
CONSENSUS_ENGINE_MAX_PARTICIPANTS=50  # Maximum agents per consensus session
CONSENSUS_ENGINE_DEFAULT_TYPE=majority  # Default consensus type (unanimous, majority, supermajority, weighted_voting, ranked_choice, bayesian)
CONSENSUS_ENGINE_AUTO_CLOSE_EXPIRED=true  # Automatically close expired sessions
CONSENSUS_ENGINE_CLEANUP_INTERVAL_MINUTES=10  # How often to process expired sessions
COMMUNICATION_MEDIATOR_CONSENSUS_REQUIRED_FOR_RESOLUTION=true  # Require consensus for conflict resolution

# =============================================================================
# TOOL INTEGRATION CONFIGURATION
# =============================================================================

# Analytics Tools Configuration
TABLEAU_SERVER_URL=  # Tableau Server URL for dashboard integration
TABLEAU_API_TOKEN=  # Tableau API token for authentication
TABLEAU_SITE_ID=  # Tableau site ID (optional, defaults to default site)

POWER_BI_CLIENT_ID=  # Power BI application client ID
POWER_BI_CLIENT_SECRET=  # Power BI application client secret
POWER_BI_TENANT_ID=  # Power BI tenant ID
POWER_BI_WORKSPACE_ID=  # Default Power BI workspace ID

GOOGLE_ANALYTICS_PROPERTY_ID=  # Google Analytics property ID
GOOGLE_ANALYTICS_CREDENTIALS_JSON=  # Path to Google Analytics service account credentials JSON

LOOKER_CLIENT_ID=  # Looker API client ID
LOOKER_CLIENT_SECRET=  # Looker API client secret
LOOKER_BASE_URL=  # Looker instance base URL

METABASE_API_KEY=  # Metabase API key
METABASE_BASE_URL=  # Metabase instance base URL

# Workflow Tools Configuration
ZAPIER_API_KEY=  # Zapier API key for automation workflows
ZAPIER_WEBHOOK_SECRET=  # Zapier webhook secret for security

MAKE_API_KEY=  # Make (Integromat) API key
MAKE_BASE_URL=  # Make instance base URL

AIRFLOW_BASE_URL=  # Apache Airflow webserver URL
AIRFLOW_USERNAME=  # Airflow admin username
AIRFLOW_PASSWORD=  # Airflow admin password

N8N_BASE_URL=  # n8n instance base URL
N8N_API_KEY=  # n8n API key

TEMPORAL_FRONTEND_ADDRESS=  # Temporal frontend service address
TEMPORAL_NAMESPACE=  # Temporal namespace

# Integration Tools Configuration
KAFKA_BOOTSTRAP_SERVERS=  # Kafka bootstrap servers (comma-separated)
KAFKA_SECURITY_PROTOCOL=  # Kafka security protocol (PLAINTEXT, SSL, SASL_PLAINTEXT, SASL_SSL)
KAFKA_SASL_MECHANISM=  # Kafka SASL mechanism (PLAIN, SCRAM-SHA-256, SCRAM-SHA-512)
KAFKA_SASL_USERNAME=  # Kafka SASL username
KAFKA_SASL_PASSWORD=  # Kafka SASL password

RABBITMQ_HOST=  # RabbitMQ server host
RABBITMQ_PORT=5672  # RabbitMQ server port
RABBITMQ_USERNAME=  # RabbitMQ username
RABBITMQ_PASSWORD=  # RabbitMQ password
RABBITMQ_VHOST=/  # RabbitMQ virtual host

AWS_REGION=  # AWS region for SNS/SQS services
AWS_ACCESS_KEY_ID=  # AWS access key ID
AWS_SECRET_ACCESS_KEY=  # AWS secret access key
AWS_SQS_QUEUE_URL=  # Default SQS queue URL
AWS_SNS_TOPIC_ARN=  # Default SNS topic ARN

AZURE_SERVICE_BUS_CONNECTION_STRING=  # Azure Service Bus connection string
AZURE_SERVICE_BUS_QUEUE_NAME=  # Default Azure Service Bus queue name

GOOGLE_CLOUD_PROJECT_ID=  # Google Cloud project ID
GOOGLE_CLOUD_PUBSUB_CREDENTIALS_JSON=  # Path to Google Cloud service account credentials JSON

# Security Tools Configuration
HASHICORP_VAULT_ADDRESS=  # HashiCorp Vault server address
HASHICORP_VAULT_TOKEN=  # HashiCorp Vault authentication token
HASHICORP_VAULT_MOUNT_POINT=secret  # Vault secrets mount point

SPLUNK_HOST=  # Splunk server host
SPLUNK_PORT=8089  # Splunk management port
SPLUNK_USERNAME=  # Splunk username
SPLUNK_PASSWORD=  # Splunk password
SPLUNK_INDEX=main  # Default Splunk index for logs

ELASTICSEARCH_HOSTS=  # Elasticsearch hosts (comma-separated)
ELASTICSEARCH_USERNAME=  # Elasticsearch username
ELASTICSEARCH_PASSWORD=  # Elasticsearch password
ELASTICSEARCH_API_KEY=  # Elasticsearch API key (alternative to username/password)

OKTA_ORG_URL=  # Okta organization URL
OKTA_API_TOKEN=  # Okta API token

AUTH0_DOMAIN=  # Auth0 domain
AUTH0_CLIENT_ID=  # Auth0 client ID
AUTH0_CLIENT_SECRET=  # Auth0 client secret

ONEPASSWORD_CONNECT_SERVER_URL=  # 1Password Connect server URL
ONEPASSWORD_CONNECT_TOKEN=  # 1Password Connect bearer token

CYBERARK_CENTRAL_CREDENTIAL_PROVIDER_URL=  # CyberArk Central Credential Provider URL
CYBERARK_APPLICATION_ID=  # CyberArk application ID
CYBERARK_SAFE_NAME=  # CyberArk safe name

# Monitoring Tools Configuration
PROMETHEUS_BASE_URL=  # Prometheus server base URL
PROMETHEUS_USERNAME=  # Prometheus basic auth username
PROMETHEUS_PASSWORD=  # Prometheus basic auth password

GRAFANA_BASE_URL=  # Grafana server base URL
GRAFANA_API_KEY=  # Grafana API key
GRAFANA_ORG_ID=1  # Grafana organization ID

DATADOG_API_KEY=  # Datadog API key
DATADOG_APP_KEY=  # Datadog application key
DATADOG_SITE=datadoghq.com  # Datadog site (datadoghq.com, datadoghq.eu, etc.)

NEW_RELIC_API_KEY=  # New Relic API key
NEW_RELIC_ACCOUNT_ID=  # New Relic account ID
NEW_RELIC_INSIGHTS_INSERT_KEY=  # New Relic Insights insert key

PAGERDUTY_INTEGRATION_KEY=  # PagerDuty integration key (Events API v2)
PAGERDUTY_API_TOKEN=  # PagerDuty API token (REST API)

SENTRY_DSN=  # Sentry DSN for error reporting
SENTRY_ENVIRONMENT=production  # Sentry environment
SENTRY_RELEASE=  # Application release version

# Tool Security Configuration
TOOL_ENCRYPTION_KEY=  # AES-256 key for encrypting tool credentials (32 bytes, base64 encoded)
TOOL_CREDENTIAL_CACHE_TTL_MINUTES=60  # How long to cache decrypted credentials
TOOL_RATE_LIMIT_GLOBAL_REQUESTS_PER_MINUTE=1000  # Global rate limit for all tools
TOOL_HEALTH_CHECK_INTERVAL_SECONDS=300  # How often to check tool health
TOOL_METRICS_RETENTION_DAYS=90  # How long to keep tool usage metrics

# Tool Categories General Configuration
TOOL_CATEGORIES_ENCRYPTION_ENABLED=true  # Enable encryption for tool credentials
TOOL_CATEGORIES_AUDIT_LOGGING_ENABLED=true  # Enable audit logging for tool operations
TOOL_CATEGORIES_CIRCUIT_BREAKER_ENABLED=true  # Enable circuit breaker pattern for tools
TOOL_CATEGORIES_CIRCUIT_BREAKER_FAILURE_THRESHOLD=5  # Consecutive failures before opening circuit
TOOL_CATEGORIES_CIRCUIT_BREAKER_TIMEOUT_SECONDS=60  # How long to wait before trying again
TOOL_CATEGORIES_RETRY_ENABLED=true  # Enable retry logic for failed operations
TOOL_CATEGORIES_MAX_RETRIES=3  # Maximum number of retry attempts
TOOL_CATEGORIES_RETRY_BACKOFF_MULTIPLIER=2.0  # Exponential backoff multiplier

# Fraud Detection Batch Processing
FRAUD_SCAN_WORKERS=4  # Number of concurrent fraud scan worker threads

# Collaboration WebSocket Configuration
WEBSOCKET_ENABLED=true  # Enable WebSocket connections for real-time collaboration
WEBSOCKET_PORT=8082  # WebSocket server port (separate from HTTP server)
WEBSOCKET_HOST=0.0.0.0  # WebSocket server host
WEBSOCKET_PATH=/ws  # WebSocket endpoint path
WEBSOCKET_MAX_CONNECTIONS=1000  # Maximum concurrent WebSocket connections
WEBSOCKET_MESSAGE_SIZE_LIMIT=1048576  # Maximum message size in bytes (1MB)
WEBSOCKET_HEARTBEAT_INTERVAL_SECONDS=30  # Heartbeat interval for connection health
WEBSOCKET_CONNECTION_TIMEOUT_SECONDS=300  # Connection timeout
WEBSOCKET_RECONNECT_ATTEMPTS=5  # Maximum reconnection attempts
WEBSOCKET_RECONNECT_INTERVAL_SECONDS=5  # Interval between reconnection attempts

# Collaboration Session Configuration
COLLABORATION_SESSION_TIMEOUT_MINUTES=120  # Default session timeout
COLLABORATION_MAX_SESSIONS_PER_USER=10  # Maximum active sessions per user
COLLABORATION_MAX_PARTICIPANTS_PER_SESSION=20  # Maximum agents per session
COLLABORATION_AUTO_ARCHIVE_COMPLETED=true  # Auto-archive completed sessions
COLLABORATION_ACTIVITY_TIMEOUT_MINUTES=30  # Mark session inactive after this time
COLLABORATION_CLEANUP_INTERVAL_MINUTES=15  # How often to cleanup expired sessions